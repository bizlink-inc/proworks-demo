# プロフィール未入力通知機能

## 概要

プロフィールに必須項目が未入力の場合、ユーザーに通知で入力を促す機能。
通知を閉じた後も1日経過すれば再度表示される。

## 必須項目

| 項目 | 遷移先タブ |
|-----|----------|
| 言語・ツールの経験 | 職歴・資格 (`work-history`) |
| 主な実績・PR・職務経歴・資格 | 職歴・資格 (`work-history`) |
| 稼働可能時期 | 希望条件 (`preferences`) |
| 希望勤務日数 | 希望条件 (`preferences`) |
| 希望作業時間（1日あたり） | 希望条件 (`preferences`) |

## 動作フロー

1. ユーザーがアプリにアクセス
2. `/api/me` からプロフィールを取得
3. `checkRequiredFields()` で必須項目をチェック
4. 未入力項目がある場合、通知を表示
5. ユーザーが通知を閉じる（×ボタン or 確認する）
6. 閉じた時刻を LocalStorage に保存
7. 次回アクセス時、1日経過していれば再度通知を表示
8. プロフィールが完成したら通知は表示されない

## 遷移ロジック

- 複数の必須項目が未入力の場合、優先度順（上記表の上から）で最初の項目のタブに遷移
- 例: 「言語・ツール」と「稼働可能時期」が未入力 → `/me?tab=work-history` へ遷移

## 技術詳細

### LocalStorage キー

| キー | 用途 |
|-----|------|
| `profile_notification_dismissed_at` | 通知を閉じた時刻（Unix timestamp） |

### 再表示間隔

- 固定間隔: 1日（24時間）
- 設定箇所: `lib/notification-context.tsx` の `PROFILE_NOTIFICATION_INTERVAL_MS`

### 関連ファイル

| ファイル | 役割 |
|---------|------|
| `lib/notification-context.tsx` | 通知の状態管理、取得ロジック |
| `lib/utils/profile-validation.ts` | 必須項目チェック、遷移先タブ判定 |
| `components/notification-dropdown.tsx` | 通知UI、クリック時の遷移処理 |
| `app/(dev)/clear-cache/page.tsx` | 開発用キャッシュクリア |

### 通知タイプ

```typescript
type ProfileIncompleteNotification = {
  id: string                  // "profile_incomplete"（固定）
  type: "profile_incomplete"
  missingFields: string[]     // 未入力項目のラベル配列
  tab: string                 // 遷移先タブ
  timestamp: string           // ISO 8601形式
}
```

## キャッシュクリア

開発時にテストする場合は `/clear-cache` にアクセスしてキャッシュをクリアできる。
