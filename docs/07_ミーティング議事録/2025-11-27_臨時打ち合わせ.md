# 【臨時MTG】ProWorks開発（AIマッチング・DB設計・削除ロジック）
**開催日**：2025年11月27日  
**議題**：AIマッチング処理の更新タイミング・スコア基準・データ保持設計の最終整理  
**参加者**：  
- 鈴木 信行（アルマ）  
- 李 正成（アルマ）  
- 末吉 令美奈（アルマ）  
- 佐藤 駿介（Bizlink／開発担当）

---

## 1. 会議の目的
- 案件追加時のマッチング実行タイミングの最適化  
- ProWorks人材／Indeed人材の扱い統合方針  
- AI／プログラムマッチスコアの基準値設計  
- 推薦レコード（マッチ結果DB）の膨張対策（削除ロジック）確立

---

## 2. マッチング実行タイミングの再設計

### 2.1 現状
- 現行仕様：**案件登録後に手動で「マッチ」ボタン押下 → 上位10名抽出**
- 改修方針：**案件追加と同時に自動で上位10名抽出**（プログラムマッチ）

### 2.2 更新処理の課題
- 新規人材流入後にマッチ結果が古くなる問題。
- 手動更新では現場運用負荷が大きいため、**夜間自動バッチ処理**の提案。

### 2.3 結論
> 案件登録時に即時初回マッチ実行。  
> 夜間（深夜帯）に全案件×最新人材の再マッチングを自動実行。  
> → 最新状態を保ちつつ処理負荷を分散。

---

## 3. データ範囲とフラグ管理

### 3.1 プロワークス／インディード混在問題
- kintone上では **ProWorks人材・Indeed人材が同一DBに格納**。
- すでに人材ごとに「流入元フラグ」が存在。

### 3.2 議論
- 鈴木：「ProWorksのみ10名／Indeedのみ10名に分ける案」
- 李：「営業側の目的は“最適な10名”の抽出。分割は不要」
- 結論：**出自問わず上位10名表示**（混在OK）  
　→ “おすすめ表示”でProWorksユーザーへの露出を担保。

---

## 4. おすすめ表示の新仕様（相対→絶対評価へ）

### 4.1 現行
- 上位10名の相対スコア順で抽出。

### 4.2 問題点
- ProWorksユーザーが少数の場合、「おすすめ案件が出ない」現象が発生。

### 4.3 改善方針
- **スコアの絶対値基準（例：50点以上）を閾値として表示。**
- 上位順位に入らなくても、一定スコア以上なら「おすすめ」に表示。

### 4.4 メリット
- プロワークス人材への案件露出が安定。  
- AIマッチロジックを含めた**統一的かつ公平な推薦基準**を実現。

---

## 5. DB構造・レコード数の最適化

### 5.1 現状
- 案件×人材のマッチ結果を1レコードずつ保存（例：100案件×100人＝1万件）。
- 一件ごとにスコア・推薦状態を保持。

### 5.2 懸念点
- レコード肥大による**検索遅延・処理負荷増大**。  
- KintoneのAPI制限（1万件以上でカーソルAPI必須）。

### 5.3 提案
| 案 | 内容 | メリット |
|----|------|-----------|
| A | スコア閾値以上のみレコード生成 | 無駄データ削減 |
| B | 夜間に既存レコード削除→再生成 | 常に最新状態を維持 |
| C | 削除後のバックアップは不要 | 軽量運用を維持 |

→ **A+B併用で運用。**

### 5.4 バッチ運用
- 夜間（例：3:00〜3:10）にバッチ処理を実行：
  - 既存マッチレコード削除  
  - 新規スコア計算→閾値以上のみ再登録  
- レコード保持期間：**1日単位の更新サイクル**。

---

## 6. データ削除・保持ポリシー

- 削除対象：マッチング結果レコードのみ（案件／人材本体は保持）  
- バックアップ：不要（重要情報でないため）  
- 削除タイミング：夜間バッチ処理と同時  
- レコード再生成時の冪等性を考慮（重複登録防止）

---

## 7. 実装タスク整理

| 担当 | 内容 | 期限 |
|------|------|------|
| 佐藤 | 夜間バッチ処理ロジック設計・削除→再生成実装 | 次回定例まで |
| 李 | 削除期間・上限値の基準策定（想定案件数・人材数ベース） | 同上 |
| 佐藤 | スコア閾値の暫定設定（例：50点）→検証 | 検証段階で調整 |
| 鈴木 | 営業側への表示要件確認（おすすめ表示基準） | 次回 |
| 全員 | 最終テスト → 12月末納品スケジュール維持 | 継続 |

---

## 8. 補足・今後の展望
- 今回の設計変更により、AIマッチ・プログラムマッチの基盤が統一化。
- 年内納品に向け、UIの残作業と同時並行でロジック実装を進行。
- 次回定例（11/28）でUI不具合確認および夜間バッチ仕様の最終レビューを実施予定。

---

**会議時間**：約28分  
**記録作成者**：佐藤 駿介（Bizlink）  
**作成日**：2025年12月9日
